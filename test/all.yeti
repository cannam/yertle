
program test.all;

{ runTests } = load test.test;

//!!! todo: refactor

tests = [
    "index" : load test.test_index,
    "store" : load test.test_store,
    "prefix" : load test.test_prefix,
    "read" : load test.test_read,
];

bad = sum (mapHash do name testHash: runTests name testHash done tests);

if (bad > 0) then
    println "\n** \(bad) test(s) failed!"
else

    specTests = [
        "spec" : load test.test_spec,
    ];

    bad = sum (mapHash do name testHash: runTests name testHash done specTests);

    if (bad > 0) then
        println "\n** \(bad) test(s) failed!";
    fi
fi

